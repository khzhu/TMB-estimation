process {
    withName: MANTA_SOMATIC {
        cpus = 16
        memory = 64.GB
        container = "${params.container_dir}/strelka2-manta.simg"
        ext.args = '--exome'
        publishDir = [
            path: { "${params.output_dir}/variants/" },
            mode: params.publish_dir_mode,
            pattern: "*.{vcf.gz,vcf.gz.tbi,yml}",
            saveAs: { "strelka2/${meta.id}/${it}" }
        ]
    }
    withName: STRELKA_SOMATIC {
        cpus = 16
        memory = 64.GB
        container = "${params.container_dir}/strelka2-manta.simg"
        ext.args = '--exome --outputCallableRegions'
        publishDir = [
            path: { "${params.output_dir}/variants/" },
            mode: params.publish_dir_mode,
            pattern: "*.{vcf.gz,vcf.gz.tbi,yml}",
            saveAs: { "strelka2/${meta.id}/${it}" }
        ]
    }
    withName: BCFTOOLS_NORM_SNV {
        container = "${params.container_dir}/bcftools-v1.20.simg"
        ext.args = '--output-type z --write-index=tbi --no-version'
        ext.prefix = "strelka2.somatic.snv.pass.norm"
        publishDir = [
                path: { "${params.output_dir}/variants/" },
                mode: params.publish_dir_mode,
                pattern: "*.{vcf.gz,tbi,yml}",
                saveAs: { "strelka2/${meta.id}/${it}" }
        ]
    }
    withName: BCFTOOLS_NORM_INDEL {
        container = "${params.container_dir}/bcftools-v1.20.simg"
        ext.args = '--output-type z --write-index=tbi --no-version'
        ext.prefix = "strelka2.somatic.indel.pass.norm"
        publishDir = [
                path: { "${params.output_dir}/variants/" },
                mode: params.publish_dir_mode,
                pattern: "*.{vcf.gz,tbi,yml}",
                saveAs: { "strelka2/${meta.id}/${it}" }
        ]
    }
    withName: GATK4_MERGEVCFS {
        container = "${params.container_dir}/gatk4.3.simg"
        ext.prefix = "strelka2.somatic.pass.norm.merged"
        publishDir = [
            path: { "${params.output_dir}/variants/" },
            mode: params.publish_dir_mode,
            pattern: "*.{vcf.gz,vcf.gz.tbi,yml}",
            saveAs: { "strelka2/${meta.id}/${it}" }
        ]
    }
}